# CLAUDE.md
This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.



## 프로젝트 개요
SRE Workbench는 다양한 SRE 도구들을 모아둔 모노레포입니다. 각 언어별로 디렉토리를 구성하여 독립적인 유틸리티들을 개발하고 관리합니다.



## 모노레포 구조
```
sre-workbench/
├── go/                    # Go 기반 유틸리티
│   ├── cmd/              # 실행 가능한 애플리케이션
│   │   └── argus/        # ArgoCD 리소스 탐지 도구
│   ├── internal/         # 내부 패키지 (도구별)
│   └── pkg/              # 공용 패키지
├── python/               # Python 기반 유틸리티
│   ├── sysinfo/          # 시스템 정보 도구
│   ├── common/           # 공통 모듈
│   └── tests/            # 테스트 코드
├── scripts/              # 스크립트 기반 도구
│   └── claude-account-switcher/  # Claude 계정 전환 도구
├── CLAUDE.md             # 모노레포 공통 가이드
└── README.md             # 프로젝트 소개
```



## 개발 원칙
- **한국어 우선**: 기술적 제약이 없는 한 모든 문서와 주석은 한국어로 작성
- **테스트 주도 개발**: BDD/TDD 방법론을 기반으로 개발
- **독립적 유틸리티**: 각 도구는 독립적으로 빌드, 실행, 배포 가능
- **사용자 중심 문서**: README는 사용자 관점을 우선으로 작성
- **클린 코드**: 명확한 함수명과 변수명으로 주석 없이도 이해 가능한 코드 작성
- **클린 아키텍처**: 계층 분리와 의존성 역전으로 유지보수와 확장이 용이한 구조
- **낮은 복잡도**: 함수는 단일 책임 원칙을 따르고, 복잡한 로직은 작은 함수로 분리
- **즉시 정리**: 사용하지 않는 코드는 즉시 제거하여 코드베이스를 깔끔하게 유지



## 문서 구조
### README.md
- **목적**: 사용자 중심 문서 (아무것도 설치되지 않은 신규 사용자 대상)
- **내용**: 유틸리티 목적, 설치 방법, 사용법, 실행 예제
- **위치**: 각 유틸리티 디렉토리의 루트

### CLAUDE.md  
- **목적**: 개발자 가이드 (유틸리티 개발 및 기여자 대상)
- **내용**: 개발 환경 설정, 코드 구조, 빌드 방법, 테스트 방법, 기여 가이드
- **위치**: 각 언어별 디렉토리 또는 유틸리티 디렉토리

### 문서 계층 구조
1. **최상위 CLAUDE.md** (현재 파일): 모노레포 전체 공통 가이드
2. **언어별 CLAUDE.md**: 해당 언어의 공통 개발 가이드
3. **유틸리티별 CLAUDE.md**: 특정 유틸리티의 개발 가이드
4. **유틸리티별 README.md**: 해당 유틸리티의 사용자 가이드



## 유틸리티별 작업 방법
각 유틸리티의 상세 정보는 해당 디렉토리의 문서를 참조하세요:
- Go 유틸리티: `go/cmd/<utility-name>/CLAUDE.md` (개발), `go/cmd/<utility-name>/README.md` (사용)
- Python 유틸리티: `python/<utility-name>/CLAUDE.md` (개발), `python/<utility-name>/README.md` (사용)
- 스크립트 도구: `scripts/<tool-name>/CLAUDE.md` (개발), `scripts/<tool-name>/README.md` (사용)



## 공통 개발 규칙
### 문서 작성 원칙
#### README.md 작성 가이드
- **대상**: 처음 사용하는 사용자 (아무것도 설치되지 않은 상태 가정)
- **구성 순서**: 
  1. 유틸리티 소개 (무엇을 하는 도구인가?)
  2. 주요 기능
  3. 설치 방법 (단계별 명령어)
  4. 사용법 (실제 사용 예제 포함)
  5. 문제 해결 (자주 발생하는 문제와 해결법)
- **작성 원칙**:
  - 실행 명령은 단일 기능 단위로 코드 블록 분리 (IDE에서 원클릭 실행 가능)
  - 구체적인 예제 제공
  - 전문 용어 최소화, 필요시 설명 추가

#### 코드 블록 작성 규칙
- **언어 지정**: 쉘 명령은 `bash` 대신 `shell`로 작성 (공통 호환성)
- **설명 위치**: 코드 블록 내부가 아닌 외부에 마크다운으로 작성
- **리스트 형식**:
  - **순서가 중요한 경우**: 숫자 리스트 사용 (1. 2. 3.)
  - **순서가 무관한 경우**: 일반 리스트 사용 (-)

##### 좋은 예시
```markdown
### 설치 방법
1. 저장소 클론
\`\`\`shell
git clone https://github.com/example/repo.git
\`\`\`

2. 디렉토리 이동
\`\`\`shell
cd repo
\`\`\`

3. 빌드 실행
\`\`\`shell
./build.sh
\`\`\`

### 사용 옵션
- 디버그 모드 실행
\`\`\`shell
app --debug
\`\`\`

- JSON 출력
\`\`\`shell
app --json
\`\`\`
```

##### 피해야 할 예시
```markdown
### 설치 방법
\`\`\`bash
# 저장소 클론
git clone https://github.com/example/repo.git
# 디렉토리 이동
cd repo
# 빌드 실행
./build.sh
\`\`\`
```

#### CLAUDE.md 작성 가이드  
- **대상**: 유틸리티 개발자 및 기여자
- **구성 순서**:
  1. 개발 환경 설정
  2. 프로젝트 구조
  3. 빌드 및 테스트 방법
  4. 코드 작성 규칙
  5. 기여 가이드라인
- **작성 원칙**:
  - 기술적 세부사항 포함
  - 코드 예제와 함께 설명
  - 개발 워크플로우 명시

### 디렉토리 구조
- 각 언어별로 표준 디렉토리 구조 준수
- 유틸리티별로 독립된 빌드/실행 환경 구성

### Go 모듈
- 모듈 경로: `gitlab.bellsoft.net/devops/sre-workbench/go`
- 내부 패키지: `internal/<tool-name>/`
- 공용 패키지: `pkg/`

### Python 모듈
- 패키지 관리: uv 사용
- Python 버전: 3.12+
- 각 유틸리티는 독립적인 pyproject.toml 보유
- 전체 개발 환경은 `python/pyproject.toml`에서 관리



## 현재 유틸리티 목록
- **Argus** (Go): ArgoCD로 관리되지 않는 K8s 리소스 탐지
- **Claude Account Switcher** (Script): Claude Code CLI 계정 전환 도구
- **sysinfo** (Python): 시스템 정보를 출력하는 CLI 도구

각 유틸리티의 빌드, 실행, 개발 방법은 해당 디렉토리의 문서를 참조하세요.



## 문서 관리 지침

### 유틸리티 생성/수정/제거 시 체크리스트

#### 신규 유틸리티 생성 시
- [ ] 유틸리티 디렉토리 생성
- [ ] README.md 작성 (사용자 가이드)
- [ ] CLAUDE.md 작성 (개발자 가이드)
- [ ] 루트 README.md의 도구 목록에 추가
- [ ] 루트 CLAUDE.md의 유틸리티 목록에 추가
- [ ] 언어별 CLAUDE.md에 필요시 추가

#### 기존 유틸리티 수정 시
- [ ] 코드 변경사항 구현
- [ ] 유틸리티 README.md 업데이트 (사용법 변경 시)
- [ ] 유틸리티 CLAUDE.md 업데이트 (구조 변경 시)
- [ ] 루트 README.md 확인 (설명 변경 필요 시)
- [ ] 변경 로그 작성 (있는 경우)

#### 유틸리티 제거 시
- [ ] 유틸리티 디렉토리 삭제
- [ ] 루트 README.md에서 제거
- [ ] 루트 CLAUDE.md에서 제거
- [ ] 언어별 문서에서 참조 제거
- [ ] 관련 의존성 정리

### 문서 일관성 유지 원칙
1. **동기화**: 코드와 문서는 항상 동일한 커밋에 포함
2. **검증**: PR 리뷰 시 문서 업데이트 확인 필수
3. **테스트**: 문서의 명령어는 실제로 실행 가능해야 함
4. **버전**: 주요 변경사항은 문서에 버전 명시

### 문서 작성 템플릿
각 유틸리티의 문서 작성 시 다음 템플릿 참조:
- README.md: 사용자가 즉시 사용할 수 있는 실용적 가이드
- CLAUDE.md: 개발자가 코드를 이해하고 기여할 수 있는 기술 가이드
